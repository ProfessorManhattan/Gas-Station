---
- name: Ensure latest Plymouth theme files are present on system
  become: true
  ansible.builtin.unarchive:
    src: https://gitlab.com/megabyte-labs/linux-theme/-/archive/master/linux-theme-master.tar.gz?path=share/plymouth
    dest: /usr/share/plymouth/
    remote_src: true

- name: Register the Plymouth theme
  become: true
  alternatives:
    name: default.plymouth
    link: /usr/share/plymouth/themes/default.plymouth
    path: /usr/share/plymouth/themes/polaroid/polaroid.plymouth"
    priority: 100

- name: Set the Plymouth theme
  become: true
  shell: plymouth-set-default-theme polaroid
  notify: update initramfs
