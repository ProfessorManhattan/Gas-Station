---
- name: "Copy the {{ item | basename }} Plasmoid to a temporary location"
  become: true
  copy:
    src: "{{ item }}"
    dest: "/tmp/{{ item | basename }}"

- name: "Install the {{ item | basename }} Plasmoid"
  become: true
  command: "plasmapkg -g -i /tmp/{{ item | basename }}"
  register: plasmapkg_register
  changed_when: "'already exists' not in plasmapkg_register.stderr"
  failed_when: "(plasmapkg_register.rc != 0) and ('already exists' not in plasmapkg_register.stderr)"
