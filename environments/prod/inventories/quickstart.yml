---
# Three hosts are defined but the quickstart script filters using an environment variable
# so only one host is provisioned at a time by quickstart.
all:
  vars:
    ansible_password: "{{ lookup('env', 'ANSIBLE_PASSWORD') }}"
    ansible_user: "{{ lookup('env', 'ANSIBLE_USER') }}"
    ansible_winrm_transport: credssp
    ansible_winrm_server_cert_validation: ignore
  children:
    desktop:
      children:
        nix:
          hosts:
            standard:
              ansible_connection: local
        qubes:
          vars:
            ansible_python_interpreter: /usr/bin/python3
            qubes:
              dom0_vm: dom0
          hosts:
            dom0:
              ansible_connection: local
              ansible_host: dom0
          children:
            vms:
              vars:
                ansible_connection: qubes
              children:
                appvms:
                netvms:
                proxyvms:
                standalonevms:
                templatevms:
        windows:
          hosts:
            standard:
              ansible_connection: winrm
